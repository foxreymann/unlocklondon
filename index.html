<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="refresh" content="5">
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map_canvas { height: 100% }
    </style>
  </head>
  <body>
    <div id="map_canvas" style="width:100%; height:100%"></div>
  </body>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="decode.js" type="text/javascript"></script>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js??libraries=geometry,drawing&sensor=false">
    </script>
    <script type="text/javascript">
        var map,
            coordinates,
            myOptions;
        function initialize() {
            map = new google.maps.Map(document.getElementById("map_canvas"),
                myOptions);
        }
        function drawPlayer(polyline) {
            coordinates = new Array(); 
           $.each(polyline,function(key,value) {
                coordinates[key] = new google.maps.LatLng(value.lat, value.long);        
           });
            var path = new google.maps.Polyline({
                path: coordinates,
                strokeColor: "#FF0000",
                strokeOpacity: 1.0,
                strokeWeight: 2
          });
             path.setMap(map);
        }
        $(function() {
            $.getJSON('serverResponseHashY.json', function(data) {
                var playground = decodeLine(data.playground);
                myOptions = {
                  center: new google.maps.LatLng(playground[0][0], playground[0][1]),
                  zoom: 12,
                  mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                initialize();
                $.each(data.players, function(key, value) {
                   drawPlayer(value.polyline);                      
                })                         
            });
        });
    </script>
</html>
